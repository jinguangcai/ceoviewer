<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="mint-ui.css">
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body onload="load()">
    <div id = 'app'>
        <mt-tab-container v-model="active">

            <mt-tab-container-item id="tab-container1">
                <div id="ssfz">
                    <label>本月实时发展情况</label>
                    <div id="fzl" style="width:90px;height:90px;float:left;margin-top:10px;"></div>
                    <div id="sr" style="width:90px;height:90px;float:auto;margin-top:10px;"></div>
                    <div id="cj" style="width:90px;height:90px;float:auto;margin-top:10px;"></div>
                    <div id="ts" style="width:90px;height:90px;float:auto;margin-top:10px;"></div>
                </div>
                <div >
                    <label>重点业务发展进度</label>
                    <div id="zdyw" style="width:300px;height:100px;"></div>
                </div>
                <div style="margin-left:20px">
                    <input type="date">-<input type="date">
                    <button onclick="queryData()">查询历史数据</button>
                    <table>

                    </table>
                </div>
            </mt-tab-container-item>

            <mt-tab-container-item id="tab-container2">
                <div>
                    <p>hello2</p>
                </div>
            </mt-tab-container-item>

            <mt-tab-container-item id="tab-container3">
               <p>hello3</p>
                <div id="personInfo">
                    <img src="" width="80px" height="120px" style="margin-left:20px;float:left"/>
                    <table style="margin-right:30px">
                        <tbody>
                        <td>
                            <tr>姓名：张某某</tr>
                            <tr>  单位：秦淮支局</tr>
                        </td>
                        <td>
                            <tr>发展量：</tr>
                            <tr>收入：</tr>
                        </td>
                        </tbody>
                    </table>
                </div>

                <div id="yj">
                    <label>昨日业绩排名(top5)：</label>

                </div>
            </mt-tab-container-item>
        </mt-tab-container>

        <mt-tabbar v-model="active">
            <mt-tab-item id="tab-container1">
                <!--<img slot="icon" src="../assets/100x100.png">-->
                我的绩效
            </mt-tab-item>
            <mt-tab-item id="tab-container2">
                <!--<img slot="icon" src="../assets/100x100.png">-->
                我的团队
            </mt-tab-item>
            <mt-tab-item id="tab-container3">
                <!--<img slot="icon" src="../assets/100x100.png">-->
                我的榜单
            </mt-tab-item>
        </mt-tabbar>
    </div>
<div>
</div>
</body>
<!-- 先引入 Vue -->
<script src="vue.js"></script>
<script src="mint-ui.js"></script>

<!-- 引入组件库 -->
<script type="text/javascript">
  new Vue({
    el: '#app',
    data: {
        active: 'tab-container1'
    },
    methods: {
      handleClick: function() {
        this.$toast('Hello world!')
      }
    }
  })
  //查询历史信息
  function queryData(){

  }


  //柱状图,先构造数据
  function drawBar(myChart){
      var option = {
        grid: {
            left: '1%',
            right: '1%',
            bottom: '30%',
            containLabel: true
        },
        xAxis:  {
            type: 'value'
        },
        yAxis: {
            type: 'category',
            data: ['重点业务']
        },
        series: [
            {
                name: '已完成',
                type: 'bar',
                stack: '总量',
                label: {
                    normal: {
                        show: true,
                        position: 'insideRight'
                    }
                },
                data: [200]
            },
            {
                name: '未完成',
                type: 'bar',
                stack: '总量',
                label: {
                    normal: {
                        show: true,
                        position: 'insideRight'
                    }
                },
                data: [100]
            }
        ]
    };
    myChart.setOption(option);
  }

     // 使用刚指定的配置项和数据显示饼图。
    function drawPie(myChart,data){
        var option = {
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            series : [
                {
                    name: '访问来源',
                    type: 'pie',
                    radius : '70%',
                    center: ['50%', '50%'],
                    data: data,
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        myChart.setOption(option);
   }

    //定义多个不同的函数，很久url返回不同的data
    function fzl(myChart){
        $.ajax({
            url : '/mobile',
            async : true,
            type : "get",
            dataType : "json",
            success : function(data){
                <!--console.log(typeof data);-->
                var arr = [];
                for(var i=0;i<data.length;i++){
                    arr.push(data[i].income);
                }
                drawPie(myChart,arr);
            },
            error: function (err) {
                console.log(err)
            }
        });
    }

    function sr(myChart){
        $.ajax({
            url : '/mobile',
            async : true,
            type : "get",
            dataType : "json",
            success : function(data){
                <!--console.log(typeof data);-->
                var arr = [];
                for(var i=0;i<data.length;i++){
                    arr.push(data[i].income);
                }
                drawPie(myChart,arr);
            },
            error: function (err) {
                console.log(err)
            }
        });
    }

    function cj(myChart){
        $.ajax({
            url : '/mobile',
            async : true,
            type : "get",
            dataType : "json",
            success : function(data){
                <!--console.log(typeof data);-->
                var arr = [];
                for(var i=0;i<data.length;i++){
                    arr.push(data[i].income);
                }
                drawPie(myChart,arr);
            },
            error: function (err) {
                console.log(err)
            }
        });
    }

    function ts(myChart){
        $.ajax({
            url : '/mobile',
            async : true,
            type : "get",
            dataType : "json",
            success : function(data){
                <!--console.log(typeof data);-->
                var arr = [];
                for(var i=0;i<data.length;i++){
                    arr.push(data[i].income);
                }
                drawPie(myChart,arr);
            },
            error: function (err) {
                console.log(err)
            }
        });
    }

    // 跳转到控制台
   function load(){
        //实时发展情况
        var myChartFZL = echarts.init(document.getElementById('fzl'));
        var myChartSR = echarts.init(document.getElementById('sr'));
        var myChartCJ = echarts.init(document.getElementById('cj'));
        var myChartTS = echarts.init(document.getElementById('ts'));
        fzl(myChartFZL);
        sr(myChartSR);
        cj(myChartCJ);
        ts(myChartTS);
        //重点业务进度
        var myChartZDYW = echarts.init(document.getElementById('zdyw'));
        drawBar(myChartZDYW);
    }
</script>
</html>